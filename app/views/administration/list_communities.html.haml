= turbo_frame_tag "tab_content" do
  .lists
    .my-communities
      %h2.title
        = 'Comunidades'
      %div{:style => "margin-bottom: 2rem"}
        %h4.title
          = 'Adicionar comunidade'
        = form_with(model: Community.new, url: "communities", method: :post, local: true) do |form|
          %table
            %tr
              %td
                Nome da comunidade: 
              %td
                = form.text_field :name, :class => "input"
            %tr
              %td
                = form.label :image, "Imagem:"
              %td
                = form.file_field :image
            %tr
              %td{colspan: 2}
                = form.submit "Adicionar", class: "button-primary"
      .cards-list
        - if @communities.blank?
          %p= 'Atualmente n√£o existem comunidades no sistema.'
        - else
          - @communities.each do |community|
            .card
              .card-image
                = image_tag resource_image(community)
              .card-content
                %h3= community.name
                %p= "Total de membros: #{community&.community_participants&.count.to_i}"
